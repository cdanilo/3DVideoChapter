\chapter{Introdução ao Vídeo 3D}

A infra-estrutura de comunicação digital tem se desenvolvido em um ritmo muito rápido nos últimos tempos. 
Por um lado, este desenvolvimento tem sido positivo para as emissoras, uma vez que criou a oportunidade 
para oferecer serviços de televisão digital para múltiplas plataformas de mídia, que permite transformar 
esses serviços de forma a alcançar um público maior e mais direcionados. Por outro lado, a oferta de 
novos e melhorados serviços de televisão tem gerado uma competição cada vez maior pela atenção e o 
interesse dos telespectadores. Como resultado, as emissoras estão sendo constantemente desafiadas a inovar, 
a fim de atender as expectativas dos novos clientes.

Duas das mais promissoras tecnologias digitais são a televisão tridimensional (3D-TV) e o cinema digital. 
Em particular, o sucesso financeiro dos filmes estereoscópicos tridimensional (S3D) tem sido claramente 
demonstrado. Reconhecendo a oportunidade oferecida por este sucesso, a indústria de radiodifusão começou 
a investigar meios para oferecer programas de televisão estereoscópica e serviços~\cite{Tam2011}. Por exemplo, 
o \textit{Advanced Television Systems Committee} (ATSC) na América do Norte criou recentemente uma equipe 
de planejamento para analisar os potenciais benefícios e desvantagens, requisitos e passos práticos que 
são necessários para entregar TV em 3D nas casas. Investigações semelhantes também estão sendo realizados 
por padrões internacionais e organizações privadas, tais como a \textit{European Broadcasting Union} (EBU), 
a \textit{International Telecommunication Union} (ITU), e o Consórcio 3D@Home.

A televisão tridimensional (3DTV) oferece melhor experiência aos seus espectadores, proporcionando a sensação 
de profundidade. Assim, a 3DTV é uma tecnologia baseada na exploração das propriedades da percepção da profundidade. 
Portanto, é importante para fornecer serviços de 3DTV de uma forma que permite alta qualidade de percepção de profundidade 
natural~\cite{Silva2010}.

Os efeitos em terceira dimensão estão se tornando cada vez mais comuns em nosso cotidiano e estar se tornando a nova febre do mundo do entretenimento. 
Mas o que poucos sabem é que, embora esta tecnologia só agora tenha começado a se desenvolver, seus princípios e as primeiras experiências já têm  mais 
de meio século. 


O primeiro filme público em 3D foi exibido em 1922, recorrendo a tecnologia anaglífica (uso de óculos com uma lente vermelha e outra azul inventados 
por L.D. DuHaron). Nada como é apresentado nas modernas salas de hoje em dia, mas a experiência de ter a impressão de ver as imagens saindo da tela 
ainda que precária causou furor no público~\cite{Fragoso}.

No incio dos anos 50, foram realizadas várias tentativas de popularizar os filmes tridimensionais. Essas 
tentativas não tiveram êxito porque a tecnologia estereoscópica limitada da época e a inclinação para ter 
objetos estereoscópicos longe da tela, muitas vezes produzia imagens desconfortáveis. 

Assim, outras experiências foram feitas, mas na época as prioridades eram outras. Era preciso aprimorar o som, o formato de exibição de imagem, reformar 
as salas de cinema e aprimorar os óculos de papel com uma lente azul e outra vermelha que além de ser desconfortáveis causavam dor de cabeça e enjoo em 
algumas pessoas.

Muitas décadas depois, o desenvolvimento da tecnologia possibilitou enormes evoluções na qualidade do 3D produzido e assim chegaram aos cinemas filmes como 
Avatar que revolucionaram o pensamento do público em geral em relação ao 3D. Desta vez é da opinião pública, tanto dos fabricantes como dos consumidores que 
o 3D veio para ficar, quer no cinema quer na televisão. 

A capacidade do homem em interpretar pares de ilustrações ou fotos de uma mesma cena, visualizados por ângulos ligeiramente diferentes, é chamada de 
estereoscopia, e teve seus fundamentos lançados no século XIX. Desde essa época, passando por livros com fotos~\cite{Parente1999}, pelo 
cinema~\cite{Zone2007}, as aplicações estereoscópicas têm aumentado sua aplicação em diversas áreas.
%(COTILHO et al, 2010, p.1).  

O grande interesse para a TV 3D, deriva do reconhecimento de que, quando comparado ao padro de televisão de duas 
dimensões (2D), esta tecnologia aumenta significativamente o valor do entretenimento de programas de televisão. 
Claramente, o principal benefício da TV 3D é a maior percepção da profundidade. Os 
benefícios da TV 3D, no entanto, inclui mais do que apenas um sentido maior de profundidade. Alguma evidência 
empírica sugere que a televiso estereoscópica também poderia melhorar a percepção de nitidez, sensação de 
presença e naturalidade. As pesquisas indicam que as pessoas preferem ver as 
imagens S3D do que os seus homólogos bidimensionais, desde que as imagens estereoscópicas sejam livres de 
incômodos e confortáveis para ver~\cite{Tam2011}.

Para a visualização estereoscópica é utilizado métodos que usam óculos especiais, a exemplo da tecnologia anaglífica (óculos com lentes de cores 
azul-ciano e vermelho), tecnologia da polarização (que utiliza óculos com filtros polarizadores de luz), a tecnologia imagem sequencial alternada 
(óculos que possuem cristal líquido e bateria) ou ainda a autoestereoscopia, que dispensa o uso dos óculos para a visualização, sendo então o 
método que mais desperta interesse por ser mais cômodo ao utilizador.

As tecnologias de visualização (óculos, monitores, projetores, etc.) vêm se desenvolvendo, evidenciando que a área da estereoscopia está em 
evolução~\cite{Dodgson1998},~\cite{Perlin.2001}. 


\section{Características do vídeo 3D}

Uma figura que tem ou parece ter altura, largura e profundidade é tridimensional (ou 3D). Uma figura que possui altura e largura mas não possui profundidade 
é bidimensional (ou 2D). Algumas delas são bidimensionais propositalmente, como por exemplo os símbolos internacionais, que indicam a porta que leva a um 
toalete, por exemplo. Os símbolos são projetados para que você possa reconhecê-los assim que os visualiza. É por isso que se utiliza somente os formatos 
mais básicos. As figuras bidimensionais são úteis para comunicar algo simples e rápido. Já os tridimensionais contam uma história mais complexa, mas 
precisam carregar muito mais informações para isso.

Por centenas de anos, foram estudados alguns truques que podem tornar uma figura bidimensional parecer uma janela no mundo real. 
Podemos ver alguns exemplos: os objetos parecem menores quando estão mais distantes; quando objetos próximos à câmera são 
focalizados, os que estão mais distantes tornam-se embaçados e as cores tendem a ser menos vibrantes conforme se distanciam. 

A terceira dimensão não existe, pois é apenas uma ilusão da mente. Isso é possível graças a um fenômeno natural chamado 
estereoscopia, que apesar do nome complicado trata-se apenas da projeção de duas imagens, da mesma cena, em pontos de observação 
ligeiramente diferentes.
O olho recebe a imagem de forma que em cada olho é projetada uma imagem do mesmo objeto e o cérebro automaticamente analisa e gera
duas imagens sob perspectivas diferentes, o que produz a profundidade estereóscopica. Nesse processo é obtido informações
quanto à profundidade, distância, posição e tamanho dos objetos, gerando uma ilusão de visão em 3D.

Com o advento da tecnologia 3D, o usuário tem a liberdade de escolher o ângulo de visão para assistir determinada cena e até 
mesmo produzir efeitos de rotação e congelamento da imagem, o que não era possível em vídeos 2D, pois só eram percebidas as 
alterações das imagens com relação ao tempo e não ao espaço.Além do mais, o efeito da estereóscopia melhora a percepção de nitidez,
sentido de presença e a naturalidade das imagens.

\section{Fatores Humanos na Percepção da Profundidade}

A visão humana é considerada uma referência na elaboração de técnicas para processamento de imagem e a análise do seu 
comportamento define o Sistema de Visão Humana (SVH). 
A imagem tridimensional se forma desde que os olhos estejam posicionados horizontalmente na cabeça, o SVH recebe duas
imagens de uma mesma cena, uma em cada olho, que se sobrepõem com alguma diferença, originando perspectivas diferentes de uma
mesma imagem. 
Analisando do ponto de vista funsional, fixando-se os olhos em algum ponto do espaço, as imagens se enquadram em ambos os olhos
sobre a retina (fóvea). Assim, o objeto é visto sob as mesmas coordenadas relativas tanto para o olho esquedo quanto para o olho
direito. A imagem do objeto fixado cai sob o horópter, linha curva ou superfície que contém os todos os pontos que estão na mesma
posição geométrica ou na mesma distância, e dá origem a uma percepção única fundida. Os pontos na frente a atrás do horopter são 
gravadas em diferentes posições relativas do olho esquerdo e direito. Essas diferenças de posições gera as disparidades horizontais 
da retina, que é utilizada pelo SVH para extrair a profundidade relativa dos objetos na cena, ou seja, a profundidadade em relação
a posição do objeto. 

Uma variedade de sugestões são exploradas pelo ser humano para perceber a profundidade do mundo em três dimensões. Estes são 
tipicamente classificadas em profundidade binocular e monocular. 
O olho humano utiliza informações monoculares como acomodação, oclusão linear e perspectiva aérea, tamanho relativo, densidade
relativa e paralaxe de movimento, para contruir a percepção de profundidade com apenas um olho. Essa características já podem
ser observadas em displays 2D ,por exemplo, as televisões tradicionais. Já a profundidade binocular requer que as informações 
de profundidade da imagem sejam exploradas com os dois olhos, de forma que as diferenças entre as imagens sejam percebidas e 
o efeito de profundidade seja formado. De fato, movimento de paralaxe monocular e a disparidade binocular estão intimamente 
relacionadas, pois as visões uma vez separados temporalmente fornecem as mesmas informações quando separadas espacialmente. 

Uma lista incompleta das sugestões de profundidade são apresentadas na Figura~\ref{fig:profundiade_bimonocular}. A extração de informações da 
profundidade da imagem visa converter sugestões de profundidade monocular contidos em sequências de vídeo em valores quantitativos da profundidade 
de uma imagem captada.   

\begin{figure}[!htb]
\centering
\includegraphics[scale=1]{imagens/profundidade_bimonocular}
\caption{Classificação da \textit{depth cues}~\cite{Liang2011}.}
\label{fig:profundiade_bimonocular}
\end{figure}

\subsection{Profundidade Binocular}

Nas dicas de profundidade binocular as imagens são formadas a partir da disparidade na projeção das imagens na retina. Ela é subdividida 
em estereopsia, acomodação e convergência que serão melhor explicadas nas subseções a seguir.

\subsubsection{Estereopsia}

A estereopsia ocorre devido ao fato dos olhos estarem horizontalmente separados, aproximadamente 6.3 cm, proporcionando a cada
olhos, um ponto de vista único sobre o mundo.
Utiliza-se duas pespectivas diferentes de uma mesma imagem vista pelos dois olhos. A imagem é formada na região central
da retina (fóvea) de cada olho sob ângulos diferentes. A difrença entre os ângulos é chamado de disparidade binocular e fornece
informações sobre as distancias relativas dos objetos até o observador, a estrutura de profundidade e o ambiente em geral.
A Figura~\ref{fig:fig} ilustra geometricamente como ocorre o processo de formação da imagem nos olhos.
 
\begin{figure}[!htb]
\centering
\includegraphics[scale=0.8]{imagens/figura1}
\caption{Geometria da estereopsia binocular~\cite{Varuna2011}.}
\label{fig:fig}
\end{figure}

Fixando-se um ponto P no centro de cada olho, fixamos outros dois pontos Q e R, de forma que Q esteja localizado depois do ponto 
central e R antes de ponto central. Cada imagem projetada por esses pontos formará angulos em relação ao ponto central, caracterizando
a disparidade angular em que Q tem disparidade positiva e R negativa. Essa diferença de sinal estimula ao cérebro a perceber a profundidade 
dos objetos em relação a posição deles. 

\subsubsection{Acomodação e Convergência(Desfoque da Retina e Profundidade de Campo)}

Na visualização dos objetos no espaço, os olhos convergem sobre ele de forma que a informação da profundidade e do ambiente caiam na área de fusão
das imagens, \textit{Panum's}. Os olhos automaticamente focam (acomodação) no objeto atualmente fixado, fazendo com que este objeto sobressaia dentre
os outros objetos ao seu redor. Imagens duplas à frente ou atrás do plano de fixação tedem a ficar fora de foco e desaparecerá com o aumento da mancha optica.
Acomodação é o processo responsável pela mudança do poder refrativo do olho, garantindo que a imagem seja focada no plano da retina.
O poder de mudança é induzido pelos músculos ciliares que alteram a curvatura e a espessura central do cristalino, aumentando o poder dióptrico. 
Quando um objeto de interesse é fixado pelo olho, a acomodação é ajustada de tal forma que uma imagem nítida é percebida na retina. Uma boa acomodação 
exige um tempo de fixação mínimo de um segundo ou mais. No entanto, o olho humano pode tolerar uma certa quantidade de desfocagem da retina sem reajustar 
a acomodação,embora os critérios para um bom foco dependam do objeto observado e variem de indivíduo para indivíduo.
 
\begin{figure}[!htb]
\centering
\includegraphics[scale=1.0]{imagens/accomod.png}
\caption{Diferença entre distância de acomodação e convergência.~\cite{3DCommunication}.}
\label{fig2:fig2}
\end{figure}

O processo de acomodação e convergência (CA/A) estão intimamente relacionados visto que a acomodação produz movimentos de convergência (acomodação de convergência) e 
convergência produz acomodação(convergência de acomodação), ou seja, objeto próximo --> acomodação --> convergência.
A acomodação é dirigido para imagens de objetos a uma distância de tela enquanto convergência está direcionado para a distâncias percebidas de ob-
jetos. 

A Figura~\ref{fig2:fig2} ilustra geometricamente como acontece o processo de acomodação, o que resulta no desfoque das imagens projetadas na retina.

\begin{figure}[!htb]
\centering
\includegraphics[scale=1.0]{imagens/figura2}
\caption{Geometria do desfoque da retina~\cite{Varuna2011}.}
\label{fig2:fig2}
\end{figure}

Fixando o ponto P, a potência óptica (capacidade de convergir ou divergir a luz) dos olhos é ajustada para que a imagem do ponto P 
esteja focada na região central da retina (fóvea). No entanto, a potência óptica dos olhos varia em uma certa frequência e, assim, 
o olho pode tolerar uma certa quantidade de desfoque da retina sem reajuste de acomodação. Esta diferença de potência óptica 
é conhecida como a profundidade de foco ocular e é apresentado em dioptrias\footnote{Dioptria é uma unidade de medida que afere o poder 
de vergência de um sistema óptico $(m-1)$. Na Óptica, é a unidade 
de medida da potência de uma lente corretiva (popularmente conhecido como grau).} ($D$). Em outras palavras, o ponto P pode ser deslocado 
ao longo do eixo óptico dentro de um período determinado, sem perceber o desfoque de imagem. Este período é conhecido como a 
profundidade de campo ($dof$). 

Os pontos mais próximos e mais distantes do limite é conhecido como o ponto "Proximal" ~($P_p$) e do ponto "Distal" ($P_d$), como mostrado 
na Figura~\ref{fig2:fig2}. 
Portanto, qualquer objeto dentro do limite é percebido nitidamente e os objetos fora do limite são percebidos "borrados" o que estimula 
a sensação de profundidade. A equação~\ref{f3} relaciona a distância do olho ao ponto $Q(v+d)$ e a quantidade de desfoque da retina $\sigma$:

\begin{equation}
 v + d = \dfrac{F \cdot r \cdot S_o}{(r \cdot S_o - F(r + \sigma ))}
 \label{f3}
\end{equation}
em que, $v$ representa distância visual, $d$ a profundidade, $F$ tamanho focal dos olhos, $r$ o raio de abertura dos olhos,
$S_o$ a distância do centro da retina (fóvea) aos olhos.

A magnitude do campo de profundidade ($dof$) difere de pessoa para pessoa, dependendo da profundidade do foco ocular do olho.
A equação~\ref{f4} representa o calculo da profundidade do foco ocular $T$ relacionando o ponto "Proximal" e "Distal". 

\begin{equation}
 T = \dfrac{1}{dof_p}-\dfrac{1}{dof_d}
 \label{f4}
\end{equation}

De acordo com o padrões de equações opticas, os valores de $dof_p$ e $dof_d$ são dados da seguinte forma:

\begin{equation}
 dof_p = \dfrac{2v}{2+v.T}~~~~~~dof_d = \dfrac{2v}{2-v.T}
 \label{f5}
\end{equation}

Não há nenhuma indicação na literatura sobre como calcular os valores de T. No entanto, ele varia entre 0.6$D$ e 0.8$D$~\cite{Varuna2011}.

Em resumo, quando um objeto está em foco e é visto nitidamente, outro objeto além do campo de profundidade $dof$ é visto "borrado".
Esse fenômeno indica a sensação de profundidade da imagem. Assim, quando um objeto é nítido e o outro é borrado tem-se a sensação 
além da distância do objeto nítido.Desta forma, são definidos limites para os objetos projetados em uma tela estereoscópica para
minimizar o desconforto visual.


\subsection{Profundidade Monocular}

Manter a visão fixa em um ponto no espaço aciona mecanismos físicos dos olhos, ou seja, como os olhos são formados por músculos e nervos, eles são
responsáveis por enviar ao cérebro informações sobre a imagem e gerar o efeito de profundidade. 
Profundidade vista por dicas geométricas é uma abordagem interessante para a obtenção da profundidades a partir de uma imagem 2D. 
As geometrias relacionadas as profundidades pictóricas sugeridas são a perspectiva linear, tamanho conhecido, tamanho relativo, 
altura da imagem, interposição e gradiente da textura. Alguns desses sinais são mais fortes do que outros. A interposição, por exemplo, 
pode nos ensinar a ordem de profundidade dos objetos, mas não a distância em profundidade entre eles. Alguns dicas podem ser difíceis de 
serem usadas em uma aplicação para a estimativa de profundidade. Por exemplo, as informações relacionadas com o tamanho dos objetos é 
difícil de serem usados, pois requer a identificação de objetos e do conhecimento de tamanhos normais para esses objetos. Os mais 
comuns são as dicas geométricas da perspectiva linear e a altura da imagem.
 
Perspectiva linear se refere à propriedade de linhas paralelas de convergir a uma distância infinita, ou equivalentemente, um objeto de 
tamanho fixo vai produzir um menor ângulo de visão quanto mais distante do olho. Esta característica é utilizada na estimativa da 
profundidade por meio da detecção de linhas paralelas nas imagens e identificação do ponto em que estas linhas convergem (ponto de fuga). 
Em seguida, uma atribuição adequada de profundidade pode ser derivada com base na posição das linhas e do ponto de fuga~\cite{Liang2011}.
 
A altura na imagem indica que objetos que estão mais próximos da parte inferior das imagens são geralmente mais próximo do que objetos 
que estão na parte superior da imagem. Cenas ao ar livre e paisagens, principalmente, contem esta indicação de profundidade pictórica. Para 
extrair essa sugestão de profundidade, linhas horizontais, normalmente têm de ser identificadas para que a imagem possa ser dividida em 
faixas que vão desde a margem esquerda até a borda direita. Para este propósito, um algoritmo de \textbf{linha-tracing} é aplicada para 
recuperar as linhas divididas ideais  sujeitas a algumas restrições geométricas~\cite{Liang2011}.
 
Além da perspectiva linear e altura da imagem, também é possível recuperar a profundidade a partir da textura (chamado de forma-de-textura), 
que tem como objetivo estimar a forma de uma superfície com base em sugestões de marcas na superfície ou sua textura~\cite{Torralba2002}. Esses métodos, 
no entanto, são normalmente restritos a tipos específicos de imagens e não pode ser aplicada na conversão do conteúdo de vídeo de 2D para 3D em geral.

\subsubsection{Tamanho Relativo}

Representa a profundidade da imagem levando em consideração a geometria da imagem formada na retina. A imagem projetada atua 
como um estímulo importante para percepção da profundidade em que o ângulo visual de um objeto projetado diminui a 
medida que a distância até o objeto aumenta e vice-versa. 
Utilizando a propriedade de semelhança de triângulo, a equação~\ref{f1} demonstra o tamanho da imagem na retina $R$ em função do
tamanho real da imagem $H$, distância focal $G$ e a distância do objeto $D$.

\begin{equation}
 \dfrac{R}{G}= \dfrac{H}{D} \Rightarrow R = \dfrac{HG}{D}
  \label{f1}
\end{equation}

O aumento na distância do objeto interfere no tamanho da imagem formada na retina, diminuindo-a de tamanho. O cérebro interpreta 
essas diferenças como uma mudança de profundidade $\varDelta R$. A equação~\ref{f2} representa matemáticamente esse comportamento. 

\begin{equation}
 R - \varDelta R = \dfrac{HF}{(D + \varDelta d)}
 \label{f2}
\end{equation}

É possível estimular uma mudança no tamanho da imagem projetada na retina por meio da mudança do tamanho do objeto $\varDelta H$.
Com isso, a mudança no tamanho dos objetos que são fisicamente similares proporcionam a sensação de profundidade devido a uma
mudança na retina do tamanho da imagem.

\begin{equation}
 R - \varDelta R = (H - \varDelta H).\dfrac{F}{D}
\end{equation}

\subsubsection{Dicas de Profundidade de cor e intensidade}  

Variações na quantidade de luz que chega ao olho também pode fornecer informações da profundidade dos objetos. Este tipo de variação se reflete 
nas imagens captadas como variações de intensidade ou alterações na cor. Sugestões de profundidade que são baseados neste mecanismo de dispersão 
atmosférica incluem, distribuição de luz e de sombra, percepção da imagem de fundo e contraste local.

Dispersão atmosférica refere-se a dispersão dos raios de luz pela atmosfera produzindo um tom azulado e menos contraste com os objetos que estão 
ao longe e melhor contraste com os objetos que estão em uma estreita faixa~\cite{Cozman1997}. Com base em regras de cor, que são aprendidas heuristicamente 
usando um grande número de imagens da paisagem, a detecção da região semântica é realizada para dividir imagens da paisagem em 
seis regiões, como céu, montanha mais distante, montanha distante, montanha próxima, terra e outros~\cite{Liang2011}. 

% Então, um valor de profundidade seria 
% atribuído a cada região para que o, Ausky, região da UA será o mais distante e, Äúother, região da UA quanto mais próximo um. A teoria da cor 
% quente / frio é usado para gerar as profundezas das imagens [34], onde um pixel com uma cor quente é atribuído uma profundidade mais perto da 
% câmera que o pixel de uma cor fria. Esse valor de profundidade de cores baseada foi ainda adicionado à mistura de dados pré-definidos profundidade, 
% o que foi selecionado de acordo com o conteúdo da cena, para fornecer os dados finais de profundidade virtual para geração de visão virtual 
% estereoscópico. Informação de cor dependente também é usado no algoritmo de criação de profundidade [39] e no sistema de conversão de 2D para 
% 3D [40]. Na proposta de método componente Cr no espaço YCbCr cor é usada como um substituto para a profundidade real em uma cena (chamada 
% profundidade substituto). O componente de Cr é o primeiro mapeados para um determinado intervalo de profundidade e uma adaptação é então 
% feita para regiões muito brilhante vermelho, a fim de evitar que entrem muito perto do espectador. A seleção das regiões vermelho brilhante 
% leva em conta o tom de pele para evitar a afectar negativamente a profundidade de personagens humanos. Evidência experimental mostrado em 
% [39] sugere que esta abordagem simples pode proporcionar uma melhoria significativa para o efeito 3D no que diz respeito à profundidade
%  percebida em imagens 2D.




 
